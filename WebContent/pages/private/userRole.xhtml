<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/pages/template/layout.xhtml">
	<ui:define name="contenu">
		<h:head>

			<title>#{msg.p_user_role_titre}</title>
		</h:head>

		<h:body>
			<p:dialog widgetVar="Ajout" resizable="false"
				header="Ajouter un role utilisateur">
				<p:messages id="message" autoUpdate="true" />
				<h:form>
					<table>
						<tr>
							<td><h:outputText value="Nom Technique"></h:outputText></td>
							<td><h:outputText value=" : "></h:outputText> <p:inputText
									value="#{userRoleManagedBean.nomTechnique}" required="true"
									requiredMessage="Veuillez saisir le nom technique"
									placeholder="Saisir le nom technique"></p:inputText></td>
						</tr>
						<tr>
							<td><h:outputText value="Libellé"></h:outputText></td>
							<td><h:outputText value=" : "></h:outputText> <p:inputText
									value="#{userRoleManagedBean.libelle}" required="true"
									requiredMessage="Veuillez saisir le libellé"
									placeholder="Saisir un libellé"></p:inputText></td>
						</tr>
					</table>
					<br />
					<br />
					<p:commandButton value="Sauver" type="submit"
						action="#{userRoleManagedBean.addUserRole}"></p:commandButton>
					<p:commandButton value="Annuler" type="cancel"></p:commandButton>
				</h:form>
			</p:dialog>
			<p:commandLink  onclick="PF('Ajout').show()" 
				>
				<h:graphicImage id="add_role_#{useRole.idUserRole}" name="private/image/plusVert.png" >
						<p:tooltip for="add_role_#{useRole.idUserRole}" value="Ajouter un rôle"/>
						</h:graphicImage>
				</p:commandLink>
			<br />
			<p:dataTable var="userRole" value="#{userRoleManagedBean.userRoles}"
				paginator="true" selectionMode="single"
				selection="#{userRoleManagedBean.userRoleSelected}"
				rowKey="#{userRole.idUserRole}">

				<p:column headerText="action" width="50">
					<p:commandLink action="#{userRoleManagedBean.deleteUserRole}"
					id="delete_role_#{useRole.idUserRole}"
						onclick="if (!confirm('Voulez-vous effacer cet enregistrement #{userRoleManagedBean.userRoleSelected.labelUserRole}?')) return false">
						<h:graphicImage name="private/image/data-delete.png" >
						<p:tooltip for="delete_role_#{useRole.idUserRole}" value="Supprimer le rôle"/>
						</h:graphicImage>
						<f:setPropertyActionListener value="#{userRole}"
							target="#{userRoleManagedBean.userRoleSelected}" />
					</p:commandLink>
				</p:column>
				<p:column headerText="id"  style="width:20px">
					<h:outputText value="#{userRole.idUserRole}"></h:outputText>
				</p:column>
				<p:column headerText="nom technique">
					<h:outputText value="#{userRole.technicalNameUserRole}"></h:outputText>
				</p:column>
				<p:column headerText="libellé">
					<h:outputText value="#{userRole.labelUserRole}"></h:outputText>
				</p:column>
			</p:dataTable>
		</h:body>
	</ui:define>
</ui:composition>
</html>